
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="/common/common-css-js :: head"></div>
    <title>登陆</title>
    <style>
        .w3-wide {
            font-size: 20px !important;
            padding-top: 4px;
        }
    </style>
</head>
<body class="w3-pale-blue">
    <div class="w3-container w3-margin-top">
        <div class="w3-third">&nbsp;</div>
        <div style="margin-top: 150px;" class="w3-third w3-card-4 w3-amber" >
            <p style="margin: 2px 0 0 0" class="w3-center w3-text-red" th:text="${errorMsg == null ? '&nbsp;' : errorMsg}"></p>
            <form th:action="@{/admin/login}" method="post" class="w3-container">
                <p class="w3-padding-24">
                    <label class="w3-quarter w3-center w3-wide">账号</label>
                    <input name="username" th:value="${username}" type="phone" class="w3-input w3-threequarter" placeholder="手机号码">
                </p>
                <p class="w3-padding-24">
                    <label class="w3-quarter w3-center w3-wide">密码</label>
                    <input name="password" th:value="${password}" type="password" class="w3-input w3-threequarter" placeholder="密码">
                </p>
                <p class="w3-padding-24">
                    <label class="w3-quarter w3-center w3-wide">验证码</label>
                    <input name="validCode" value="" autocomplete="off" type="text" class="w3-input w3-half" placeholder="验证码">
                    <img style="height: 40px;" class="w3-quarter" th:src="@{/admin/kaptcha}"  onclick="javascript:this.src='/admin/kaptcha?d='+new Date()*1"  title="点击重新获取验证码" />
                </p>
                <p class="w3-row">
                    <div class="w3-quarter">&nbsp;</div>
                    <div class="w3-threequarter">
                        <button type="submit" class="w3-button w3-block w3-blue">登陆</button>
                    </div>
                </p>
            </form>
            <p>
                <div th:replace="/common/common-css-js :: copy"></div>
            </p>
        </div>
    </div>
    <script>

        $(function () {
            /* 当登陆页面不是最顶级页面时，将最顶级页面设为登陆页面 */
            if(window.top.location.href !== window.location.href) {
                window.top.location.href = window.location.href;
            } else {
                /* 当登出之后，禁用页面后退功能 */
                history.pushState(null, null, document.URL);
                window.addEventListener('popstate', function () {
                    history.pushState(null, null, document.URL);
                });
            }
        })
    </script>
</body>
</html>